[[_TOC_]]

# SSH鍵　PC側の設定

## Gitlabにssh接続するために、鍵を生成します。

windowsであれば、Dockerインストール時に一緒にインストールしたGit guiから、Generate keyで、生成するのがラクチンです。

![2020-08-30__1_](uploads/f717d156eb743e88ac83196473dbf7b1/2020-08-30__1_.png)

- `~/.ssh/id_rsa.pub`というファイルができあがります。

- 飯塚の場合は、`/c/Users/manami/.ssh/`という構成でした。環境変数などにより個人で場所は変わると思います。適宜読み替えてください。

ほかのOSの人はコマンドでの鍵生成方法はググってください


## configファイルの配置
鍵と同じフォルダに、configというファイルを配置します。拡張子はありません。中身は同じで大丈夫なので、こちら↓をお使いください

[config](uploads/f4a2ed20aee3e9ff91fa7db53d5a3e81/config)


# SSH鍵　Gitlab側の設定

##  ブラウザで、Gitlabにログインして、右上アイコンからユーザ設定を開きます。

![1598838705093](uploads/02a18d40de8300d4b04e52e1436c7eef/1598838705093.jpg)

ssh鍵を選択。

先ほど生成した鍵`~/.ssh/id_rsa.pub`を全行クリップボードにコピーして、貼り付けます。

年月日は有効期限で、空欄なら無期限となります。

タイトルは任意。

「キーを追加」を押下

![2020-08-30__2_](uploads/1de597f129637ad051b91b08c85dd376/2020-08-30__2_.png)


# できたか試してみよう

登録が終わったら、ssh通信ができるか試してみましょう。

`ssh -T git@gitlab.com -i ~/.ssh/id_rsa`

意味：-iで「この鍵を使って」　というテストで接続するコマンド。成功すればWelcome!って歓迎してもらえます。

![2020-08-31](uploads/f1ccabc424ccbb780439c338abdd43e0/2020-08-31.png)
